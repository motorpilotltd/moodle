define(["jquery","core/config","block_arup_mylearning/purl"],function(a,b,c){return{initialise:function(){a("#block_arup_mylearning_content").children().each(function(){var c=a(this).attr("id").match(/block_arup_mylearning_content_(.*)/);a(this).hasClass("hidden")&&a.ajax({url:b.wwwroot+"/blocks/arup_mylearning/ajax.php",type:"POST",data:{sesskey:b.sesskey,action:"content",currenttab:c[1],instance:a("#block_arup_mylearning_content").data("instance")},success:function(b){"ERROR"!==b&&a("#block_arup_mylearning_content_"+c[1]).html(b)}})}),a(document).on("click",".block_arup_mylearning_tabs a:not(.nolink)",function(){var b=c(a(this).attr("href")),d="#block_arup_mylearning_tabs_"+b.param("tab"),e="#block_arup_mylearning_content_"+b.param("tab");return a(d).css("visibility","visible").show().removeClass("hidden").siblings().hide(),a(e).css("visibility","visible").show().removeClass("hidden").siblings().hide(),!1});var d;a(document).on("click","a[data-toggle=modal]",function(){var b=a(this).data("target"),c=a(this).data("label");d=a(b+" .modal-body").html(),a(b+"-label").text(c),a(b+" .modal-body").load(a(this).data("url"))}),a(document).on("hidden.bs.modal",".modal",function(){a(this).data("modal",null),a("#info-modal-label").empty(),a(this).find(".modal-body").html(d)}),a("textarea[maxlength]").bind("input propertychange",function(){var b=a(this),c=b.attr("maxlength");b.val().length>c&&b.val(a(this).val().substring(0,c))})}}});