define(["jquery","core/config","core/str","core/notification","local_onlineappraisal/datepicker"],function(a,b,c,d,e){return{init:function(b){var f=a("#oa-bulkupload-duedate");f.prop("readonly",!0).css({backgroundColor:"#ffffff",cursor:"pointer"}),f.datepicker({autoclose:!0,format:{toDisplay:function(a,b,c){return e.toDisplay(a,b.format,c)},toValue:function(a,b,c,d){return e.toValue(a,b.format,c,d)},format:b.dateformat},todayHighlight:!0,startDate:new Date,zIndexOffset:1030,language:a("html").prop("lang").replace("-","_")}),f.next(".input-group-addon").on("click",function(){f.focus()}),a("#oa-bulkupload-steptwo-submit").click(function(){var b=a(this),e=b.html();b.prop("disabled",!0),c.get_string("admin:processingdots","local_onlineappraisal").done(function(a){b.html('<i class="fa fa-lg fa-fw fa-spinner fa-spin"></i><span class="sr-only">'+a+"</span>")}).fail(d.exception);var f=a("#oa-bulkupload-duedate"),g=f.datepicker("getUTCDate");if("[object Date]"!==Object.prototype.toString.call(g)){var h=a("#header").outerHeight(!0);return f.closest(".form-group").addClass("has-error").find(".help-block").hide().removeClass("hidden").show(),a("html, body").animate({scrollTop:f.offset().top-h},500),b.html(e),b.prop("disabled",!1),b.blur(),f.datepicker().on("changeDate",function(){f.closest(".form-group").removeClass("has-error").find(".help-block").hide(),a("html, body").animate({scrollTop:b.offset().top-h},500)}),!1}var i=b.prop("href")+"&duedate="+g.getTime()/1e3;return b.prop("href",i),!0}),a(".oa-bulkupload-generic-submit").click(function(){var b=a(this);return b.prop("disabled",!0),c.get_string("admin:processingdots","local_onlineappraisal").done(function(a){b.html('<i class="fa fa-lg fa-fw fa-spinner fa-spin"></i><span class="sr-only">'+a+"</span>")}).fail(d.exception),!0})}}});