define(["jquery","core/str","core/notification"],function(a,b,c){return{init:function(){b.get_string("form:addfeedback:confirm","local_onlineappraisal").done(function(d){a('input[name="_qf__apform_addfeedback"]').closest("form").submit(function(e){e.preventDefault();var f=a(this),g=f.find("input[type=submit]:focus").attr("id");"id_submitbutton"==g&&(a("input[name=buttonclicked]").val(1),c.confirm("Submit Feedback",d,"Ok","Cancel",function(){f.unbind("submit").submit()})),"id_savedraft"==g&&(a("input[name=buttonclicked]").val(2),b.get_string("form:addfeedback:saveddraft","local_onlineappraisal").done(function(a){c.alert("Save Draft",a,"OK"),setTimeout(function(){f.unbind("submit").submit()},2e3)}))})}).fail(c.exception)}}});