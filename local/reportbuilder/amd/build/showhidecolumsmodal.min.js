define(["jquery","core/modal_factory","core/templates","core/str","core/ajax","core/notification"],function(a,b,c,d,e,f){var g={init:function(g,h){var i=[],j={id:g},k={methodname:"local_reportbuilder_report_headers_config",args:j},l=e.call([k])[0];l.then(function(e){i=JSON.parse(e.config);var g=a("[data-action='showcolumns']"),h=d.get_string("showhidecolumns","local_reportbuilder").fail(f.exception),j=c.render("local_reportbuilder/showhidecolumnsmodal",i).fail(f.exception);b.create({title:h,body:j,type:b.types.DEFAULT},g)}),a("body").on("click","#column-checkboxes input",function(){var b="#"+h+" th."+a(this).attr("name"),c="#"+h+" td."+a(this).attr("name"),d=a(this).is(":checked")?1:0;a(b).toggle(),a(c).toggle(),a.ajax({url:M.cfg.wwwroot+"/local/reportbuilder/showhide_save.php",data:{shortname:h,column:a(this).attr("name"),value:d,sesskey:M.cfg.sesskey}})})}};return g});