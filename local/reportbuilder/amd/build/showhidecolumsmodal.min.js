define(["jquery","core/modal_factory","core/templates","core/str","core/notification"],function(a,b,c,d,e){var f={init:function(f,g,h){var i=a("[data-action='showcolumns']"),j=d.get_string("showhidecolumns","local_reportbuilder").fail(e.exception),k=c.render("local_reportbuilder/showhidecolumnsmodal",h).fail(e.exception);b.create({title:j,body:k,type:b.types.DEFAULT},i),a("body").on("click","#column-checkboxes input",function(b){var c="#"+g+" th."+a(this).attr("name"),d="#"+g+" td."+a(this).attr("name"),e=a(this).is(":checked")?1:0;a(c).toggle(),a(d).toggle(),a.ajax({url:M.cfg.wwwroot+"/local/reportbuilder/showhide_save.php",data:{shortname:g,column:a(this).attr("name"),value:e,sesskey:M.cfg.sesskey}})})}};return f});