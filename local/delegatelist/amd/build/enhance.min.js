define(["core/config","jquery","local_delegatelist/URI"],function(a,b,c){return{initialise:function(){var d=a.wwwroot+"/local/delegatelist/ajax.php",e=function(a,d){b(".delegate-list-container").load(d,a,function(){b("#delegate-list-class-dates").html(b("#delegate-list-class-list").data("dates")),b("#delegate-list-class-duration").html(b("#delegate-list-class-list").data("duration"));var a=b("#delegate-list-class-list").data("location");b("#delegate-list-class-location").html(a),""===a?b("#delegate-list-class-location").parent().addClass("hide"):b("#delegate-list-class-location").parent().removeClass("hide");var d=b("#delegate-list-class-list").data("trainingcenter");b("#delegate-list-class-trainingcenter").html(d),""===d?b("#delegate-list-class-trainingcenter").addClass("hide"):b("#delegate-list-class-trainingcenter").removeClass("hide");var e=b(".navigationbuttons .print");e.data("classid",b("#delegate-list-class-list").data("classid"));var f=c(e.attr("href"));f.removeSearch("classid"),f.addSearch("classid",e.data("classid")),e.attr("href",f.href())})};b(".delegate-list-container").on("click","#delegatelistform button",function(){var a=b(this);if("checkall"===a.attr("id"))a.closest("form").find('input[type="checkbox"]').prop("checked",!0);else if("checknone"===a.attr("id"))a.closest("form").find('input[type="checkbox"]').prop("checked",!1);else if("sendemail"===a.attr("id")){var c=[];if(a.closest("form").find('input[type="checkbox"]:checked').each(function(){c.push(b(this).data("email"))}),c.length>0){var d="mailto:"+c.join("%3B")+"%3B";b('<a id="delegate-list-mailto" class="hidden" href="'+d+'">&nbsp;</a>').insertAfter(b(this)),b("#delegate-list-mailto")[0].click(),b("#delegate-list-mailto").remove()}}return!1}),b("#formchangeclass").on("change","select",function(){var a={contextid:b('#formchangeclass input[name="contextid"]').val(),classid:b("#formchangeclass select").val()};return e(a,d),!1}),b(".delegate-list-container").on("change","#formchangefilter select",function(){var a={contextid:b('#formchangeclass input[name="contextid"]').val(),filters:{bookingstatus:b("#formchangefilter select").val()},classid:b("#formchangeclass select").val()};return e(a,d),!1}),b("#page-local-delegatelist-index .delegate-list-container").on("click","th a",function(){var a=b(this).attr("href").replace(/index\.php/,"ajax.php"),c={contextid:b('#formchangeclass input[name="contextid"]').val(),filters:{bookingstatus:b("#formchangefilter select").val()},classid:b("#formchangeclass select").val()};return e(c,a),!1}),b("#page-local-delegatelist-print .delegate-list-container").on("click","th a",function(){var a=b(this).attr("href").replace(/print\.php/,"ajax.php"),c={contextid:b('#formchangeclass input[name="contextid"]').val(),filters:{bookingstatus:b("#formchangefilter select").val()},classid:b("#formchangeclass select").val(),"function":"print"};return e(c,a),!1}),b(".navigationbuttons .print").on("click",function(){var a=window.open(b(this).attr("href"));return a.onload=function(){a.print()},!1}),b("#page-local-delegatelist-print .close-window").on("click",function(){return window.close(),!1})}}});