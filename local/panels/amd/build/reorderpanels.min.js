define(["jquery","core/notification","core/custom_interaction_events","local_panels/sortable_list"],function(a,b,c,d){var e={PANEL_ROW_CONTAINER:'[data-region="panel-row"]',PREVIEW_PANELS:'[data-region="previewpanels"]',PANEL_ORDER_FIELD:'input[name="panelorder"]'},f=function(b){c.define(b,[c.events.activate]);var f=b.find(e.PREVIEW_PANELS),g=function(a){return a.find("h3.panelname").text()},h=new d(f,{moveHandlerSelector:"[data-action=movepanel] > [data-drag-type=move]"});h.getElementName=function(b){return a.Deferred().resolve(g(b))};var i=b.find(e.PANEL_ROW_CONTAINER);i.on(d.EVENTS.DROP,function(c,d){if(c.stopPropagation(),d.positionChanged){var f=b.find("div.panelroweditgroup"),g=[];f.each(function(){g.push(a(this).attr("data-panelid"))}),b.find(e.PANEL_ORDER_FIELD).val(g)}})},g=function(b){b=a(b),f(b)};return{init:g}});