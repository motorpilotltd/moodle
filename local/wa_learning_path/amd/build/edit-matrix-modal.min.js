define(["jquery","theme_bootstrap/bootstrap","local_wa_learning_path/helper","local_wa_learning_path/edit-matrix-actions"],function(o,a,e,l){"use strict";return{loadModalRow:function(a){var l=o("#"+a+".wa_row .name .tooltip").text();return o("#myModalRow #delete").attr("data-id",a),o("#myModalRow #save").attr("data-id",a),o("#myModalRow #name").val(l),o("#myModalRow #position").val(e.getRowPosition(a)-1),"yes"==o("#"+a+" .row_header").attr("show")?o("#myModalRow #visible").prop("checked",!0):o("#myModalRow #visible").prop("checked",!1),o("#myModalRow").modal("show"),!1},saveRow:function(a){var t=o("#myModalRow #name").val(),i=t.replace(/^(.{20}[.]*).*/,"$1");i.length<t.length&&(i+="...");var n=o("#myModalRow #position").val(),d=o("#myModalRow #visible").is(":checked");o("#"+a+".wa_row .name .tooltip").text(t),o("#"+a+".wa_row .row_header").attr("title",t),o("#"+a+".wa_row .name .text").text(i),e.moveRow(a,n),e.updateVisibility(a,d,"row"),l.waSaveAjax("updated","Row",t),o("#myModalRow").modal("hide")},loadModalColumn:function(a){var l=o(".cols #"+a+" .name .tooltip").text(),t=o(".cols #"+a).attr("description"),i=o(".cols #"+a+" .select").val();return o("#myModalColumn #delete").attr("data-id",a),o("#myModalColumn #save").attr("data-id",a),o("#myModalColumn #name").val(l),o("#myModalColumn #description").val(t),o("#myModalColumn #position").val(e.getColumnPosition(a)-1),o("#myModalColumn #regions").val(i),"yes"==o("#"+a).attr("show")?o("#myModalColumn #visible").prop("checked",!0):o("#myModalColumn #visible").prop("checked",!1),o("#myModalColumn").modal("show"),!1},saveColumn:function(a){var t=o("#myModalColumn #description").val(),i=o("#myModalColumn #name").val(),n=i.replace(/^(.{18}[.]*).*/,"$1");n.length<i.length&&(n+="...");var d=o("#myModalColumn #position").val(),m=o("#myModalColumn #visible").is(":checked"),r=o("#myModalColumn #regions").val();e.moveColumn(a,d),e.updateRegionVisibility(a,r),o(".cols #"+a).attr("description",t),o(".cols #"+a+" .name .tooltip").text(i),o(".cols #"+a).attr("title",i),o(".cols #"+a+" .name .text").text(n),o(".cols #"+a+" .select").val(r),e.updateVisibility(a,m,"column"),l.waSaveAjax("updated","Column",i),o("#myModalColumn").modal("hide")},initialiseRemoveColumn:function(a){var t=o(".cols #"+a+" .name .tooltip").text();return o("#dialog-confirm").dialog({resizable:!1,height:200,width:500,modal:!0,autoOpen:!1,buttons:{Yes:function(){var i=o("#"+a),n=o(".wa_matrix .cols .col_header").index(i),d=parseInt(n)+2;o(".wa_matrix > div > div:nth-child("+d+")").remove(),e.calculateWidthAndHeight(),l.waSaveAjax("deleted","Column",t),o(this).dialog("close"),o("#myModalColumn").modal("hide")},No:function(){o(this).dialog("close")}}}).dialog("open"),!1},initialiseRemoveRow:function(a){var e=o("#"+a+".wa_row .name .tooltip").text();return o("#dialog-confirm").dialog({resizable:!1,height:200,width:500,modal:!0,autoOpen:!1,buttons:{Yes:function(){o("#"+a).remove(),l.waSaveAjax("deleted","Row",e),o(this).dialog("close"),o("#myModalRow").modal("hide")},No:function(){o(this).dialog("close")}}}).dialog("open"),!1}}});