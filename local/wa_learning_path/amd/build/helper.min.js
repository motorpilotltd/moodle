define(["jquery","theme_bootstrap/bootstrap"],function(t,i){"use strict";return{getColumnPosition:function(i){var e=t("#"+i),a=t(".wa_matrix .cols .col_header").index(e);return parseInt(a)+2},calculateWidthAndHeight:function(){var i=0,e=t(".wa_row").length;t(".wa_row .row_header").each(function(){i+=t(this).height()}),t(".wa_row .row_header").each(function(){t(this).height(i/e),t(this).width(120)});var a=t("#main").width()-55,n=t(".col_header").length-1;t(".col_header").each(function(){t(this).width(a/n)}),t(".cell").each(function(){t(this).attr("style","width: "+a/n+"px !important;height: "+i/e+"px !important;")}),t(".add_row").width(t(".wa_matrix").width()-20)},moveColumn:function(i,e){t.fn.swapWith=function(i){return this.each(function(){var e=t(i).clone(!0),a=t(this).clone(!0);t(i).replaceWith(a),t(this).replaceWith(e)})};var a,n=this.getColumnPosition(i),h=t(".wa_matrix .col_header").length,r=parseInt(e)+1;if(n<r)for(a=2;a<h+1;a++)a>=n&&a<r&&t(".wa_matrix > div").each(function(i){t(this).find("> div:nth-child("+parseInt(a)+")").swapWith(t(this).find("> div:nth-child("+(parseInt(a)+1)+")"))});if(n>r)for(a=parseInt(h)+1;a>1;a--)a<=n&&a>r&&t(".wa_matrix > div").each(function(i){t(this).find("> div:nth-child("+parseInt(a)+")").swapWith(t(this).find("> div:nth-child("+(parseInt(a)-1)+")"))})},updateRegionVisibility:function(i,e){t(".cols #"+i+" .m3 span").each(function(){t(this).hasClass("hide")||t(this).addClass("hide")}),e.forEach(function(e){t(".cols #"+i+' .m3 span[id="'+e+'"]').removeClass("hide")})},updateVisibility:function(i,e,a){"column"==a&&(1==e?(t("#"+i).attr("show","yes"),t("#"+i).removeClass("greyed")):t("#"+i).attr("show","no")),"row"==a&&(1==e?(t("#"+i+" .row_header").attr("show","yes"),t("#"+i).hasClass("greyed")&&t("#"+i).removeClass("greyed")):(t("#"+i+" .row_header").attr("show","no"),t("#"+i).hasClass("greyed")||t("#"+i).addClass("greyed"))),this.setHiddenCells()},setHiddenCells:function(){t(".wa_matrix .cell").removeClass("greyed"),t('.wa_matrix .col_header[show="no"]').each(function(){var i=t(".wa_matrix .cols .col_header").index(this),e=parseInt(i)+2;t(".wa_matrix > div > div:nth-child("+e+")").addClass("greyed")})},moveRow:function(i,e){t.fn.swapWith=function(i){return this.each(function(){var e=t(i).clone(!0),a=t(this).clone(!0);t(i).replaceWith(a),t(this).replaceWith(e)})};var a,n=this.getRowPosition(i),h=t(".wa_matrix .wa_row").length,r=parseInt(e)+1;if(n<r)for(a=2;a<h+1;a++)a>=n&&a<r&&t(".wa_matrix").each(function(i){t(this).find("> div:nth-child("+parseInt(a)+")").swapWith(t(this).find("> div:nth-child("+(parseInt(a)+1)+")"))});if(n>r)for(a=parseInt(h)+1;a>1;a--)a<=n&&a>r&&t(".wa_matrix").each(function(i){t(this).find("> div:nth-child("+parseInt(a)+")").swapWith(t(this).find("> div:nth-child("+(parseInt(a)-1)+")"))})},getRowPosition:function(i){var e=t("#"+i),a=t(".wa_matrix .wa_row").index(e);return parseInt(a)+2}}});