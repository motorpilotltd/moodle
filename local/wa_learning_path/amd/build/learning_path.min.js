define(["jquery","theme_bootstrap/bootstrap","core/str"],function(t,i){"use strict";return{init:function(){var i=function(n){t.get(n,function(n){t("#myModal .modal-body").html(n);var e=t("#myModal .modal-body #print_section").first();t("#myModal #print_placeholder").replaceWith(e),t("#myModal .modal-body").find("#print_section").hide(),t("#myModal").modal("show"),t("#myModal .matrix_activities .activity_completion").click(function(){a(t(this))}),t("#myModal #print_section").click(function(){var i="",a="";t(".levels").val()&&(i=t(".levels").val().join()),t(".region").val()&&(a=t(".region").val().join());var o=t(this).prop("href")+"&levels="+i+"&regions="+a;t(this).prop("href",o)}),t("form.filtration :checkbox, form.filtration select").on("change",function(){o()}),t(".navigate-cells").on("click",function(){return i(t(this).attr("data-url")),!1})})},a=function(i){var o=i.hasClass("no")?1:0,n=i.attr("data-id"),e=i.attr("data-lpathid"),r=i.attr("data-url");if(o&&i.data("cpd")&&!window.confirm(str.get_string("confirm:cpdupload","local_wa_learning_path")))return!1;return t.ajax({method:"POST",url:r,data:{activityid:n,learningpathid:e,completion:o}}).done(function(o){var n=i.parent();t(n).html(o),t(n).find(".activity_completion").on("click",function(){a(t(this))})}),!1},o=function(){var i=t("#myModal form.filtration .filter_position :checkbox:checked").map(function(){return t(this).val()}).get(),a=t("#myModal form.filtration .filter_percent :checkbox:checked").map(function(){return parseInt(t(this).val())}).get(),o=t("#myModal form.filtration .filter_methodology select").val();t("#myModal table.list_of_activities tr").each(function(){var n=!1;""!==o&&t(this).data("methodology")!==o&&(n=!0),-1===t.inArray(t(this).data("position"),i)&&(n=!0),a.length<3&&-1===t.inArray(parseInt(t(this).data("percent")),a)&&(n=!0),n?t(this).hide():t(this).show()})};t(document).ready(function(t){t('a[data-toggle="modal"]').on("click",function(){return i(this.href),!1}),t(".cell_icon_container").on("mouseover",function(){var i=t(this).parent().attr("id").replace("#","").split("_"),a=i[0],o=i[1];t(".lp_cell").each(function(){t(this).removeClass("cell-highlight");var i=t(this).attr("id").replace("#","").split("_"),n=i[0],e=i[1];n!=a&&e!=o||t(this).addClass("cell-highlight")})})})}}});